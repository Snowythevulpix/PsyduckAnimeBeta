<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Psyduckanime - The best place to watch Pokemon without ads</title>
  <meta property="og:title" content="Psyduckanime - The best place to watch Pokemon without ads"/>
  <meta property="og:image" content="/assets/Psyduck.png"/>
  <!-- Favicon -->
  <link rel="icon" href="/assets/Psyduck.png"/>
  <link rel="stylesheet" href="/assets/style.css">
  <!-- Clappr CDN -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>
</head>
<body>
  <!-- Home button image -->
  <a href="/">
    <img class="home-button" src="/assets/logo.png" alt="Home">
  </a>

  <!-- Clappr player container -->
  <div id="player-container"></div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const anilistid = urlParams.get('anilistid');
    const episode = urlParams.get('episode');
    const source = urlParams.get('source');
    const subtype = urlParams.get('subtype');
  
    // Printing the variables
    console.log('anilist id:', anilistid);
    console.log('episode:', episode);
    console.log('source:', source);
    console.log('subtype:', subtype);

    document.addEventListener('DOMContentLoaded', async function() {
      try {
        // Make API request to fetch data
        const response = await fetch(`https://api.anify.tv/episodes/${anilistid}`);
        if (response.ok) {
          const data = await response.json();
          // Find the providerId object that matches the 'source'
          const providerData = data.find(provider => provider.providerId === source);
          if (providerData) {
            console.log('Provider Data:', providerData);
            // Access the episodes array within the providerData if needed
            const episodes = providerData.episodes;
            // Do whatever you want with the episodes array
          } else {
            console.log('Provider not found for the given source.');
          }
        } else {
          console.log('Failed to fetch provider data.');
        }
      } catch (error) {
        console.error('Error fetching provider data:', error);
      }
      
      // Create the Clappr player
      var player = new Clappr.Player({
        source: "https://ia801200.us.archive.org/20/items/youtube-BbeeuzU5Qc8/BbeeuzU5Qc8.mp4",
        parentId: '#player-container', // Pass the selector string of the container
        // Additional configurations can be added as needed based on the documentation
      });
    });
  </script>
</body>
</html>