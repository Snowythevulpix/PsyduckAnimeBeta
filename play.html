<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Psyduckanime - The best place to watch Pokemon without ads</title>
  <meta property="og:title" content="Psyduckanime - The best place to watch Pokemon without ads"/>
  <meta property="og:image" content="/assets/Psyduck.png"/>
  <!-- Favicon -->
  <link rel="icon" href="/assets/Psyduck.png"/>
  <link rel="stylesheet" href="/assets/style.css">
  <!-- Clappr CDN -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>
</head>
<body>
  <!-- Home button image -->
  <a href="/">
    <img class="home-button" src="/assets/logo.png" alt="Home">
  </a>

  <!-- Clappr player container -->
  <div id="player-container"></div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Function to get URL parameters
      function getUrlParams() {
        var searchParams = new URLSearchParams(window.location.search);
        var params = {};
        for (let param of searchParams) {
          params[param[0]] = param[1];
        }
        return params;
      }

      // Get URL parameters
      var urlParams = getUrlParams();
      console.log(urlParams); // This will log the parameters to the console

      // Required parameters
      var id = urlParams.id;
      var episode = urlParams.episode;
      var source = urlParams.source;
      var subtype = urlParams.subtype;

      // Fallback URL in case any required parameters are missing
      var fallbackURL = "https://ia801509.us.archive.org/10/items/Rick_Astley_Never_Gonna_Give_You_Up/Rick_Astley_Never_Gonna_Give_You_Up.mp4";

      // Placeholder function to simulate API request for video URL
      function fetchVideoURL(id, episode, source, subtype) {
        // Simulate fetching video URL from an API based on parameters
        // Replace this with your actual API call logic
        return new Promise((resolve, reject) => {
          if (id && episode && source && subtype) {
            // If all required parameters are present, construct the video URL
            const videoURL = `http://your-api-endpoint.com/videos?id=${id}&episode=${episode}&source=${source}&subtype=${subtype}`;
            resolve(videoURL);
          } else {
            // If any required parameter is missing, use the fallback URL
            resolve(fallbackURL);
          }
        });
      }

      // Call the placeholder API function to get the video URL
      fetchVideoURL(id, episode, source, subtype)
        .then(videoURL => {
          // Create the Clappr player with the dynamically fetched video source
          var player = new Clappr.Player({
            source: videoURL,
            parentId: '#player-container',
            // Additional configurations can be added as needed based on the documentation
          });
        })
        .catch(error => {
          console.error('Error fetching video URL:', error);
        });
    });
  </script>
</body>
</html>
